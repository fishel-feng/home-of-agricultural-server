{"version":3,"sources":["../../../../app/io/controller/io.js"],"names":["Controller","require","IOController","token","ctx","args","service","io","login","socketId","console","log","userToken","targetId","content","type","chat","circleId","like","comment","questionId","answer","expertId","invite","follow","module","exports"],"mappings":"AAAA;;;;;;;;;;;;AACA,IAAMA,aAAaC,QAAQ,KAAR,EAAeD,UAAlC;;IAEME,Y;;;;;;;;;;;;;AAEJ;;;;;;;;;;AAIQC,qB,GAAQ,KAAKC,GAAL,CAASC,IAAT,CAAc,CAAd,C;;uBACS,KAAKC,OAAL,CAAaC,EAAb,CAAgBC,KAAhB,CAAsBL,KAAtB,C;;;AAAjBM,wB;;AACN;AACAC,wBAAQC,GAAR,CAAYF,QAAZ;;;;;;;;;;;;;;;;;AAGF;;;;;;;;;;;;;AAIQG,yB,GAAY,KAAKR,GAAL,CAASC,IAAT,CAAc,CAAd,C;AACZQ,wB,GAAW,KAAKT,GAAL,CAASC,IAAT,CAAc,CAAd,C;AACXS,uB,GAAU,KAAKV,GAAL,CAASC,IAAT,CAAc,CAAd,C;AACVU,oB,GAAO,KAAKX,GAAL,CAASC,IAAT,CAAc,CAAd,C;;uBACP,KAAKC,OAAL,CAAaC,EAAb,CAAgBS,IAAhB,CAAqBJ,SAArB,EAAgCC,QAAhC,EAA0CC,OAA1C,EAAmDC,IAAnD,C;;;;;;;;;;;;;;;;;AAGR;;;;;;;;;;;;;AAIQH,yB,GAAY,KAAKR,GAAL,CAASC,IAAT,CAAc,CAAd,C;AACZQ,wB,GAAW,KAAKT,GAAL,CAASC,IAAT,CAAc,CAAd,C;AACXY,wB,GAAW,KAAKb,GAAL,CAASC,IAAT,CAAc,CAAd,C;;uBACX,KAAKC,OAAL,CAAaC,EAAb,CAAgBW,IAAhB,CAAqBN,SAArB,EAAgCC,QAAhC,EAA0CI,QAA1C,C;;;;;;;;;;;;;;;;;AAGR;;;;;;;;;;;;;AAIQL,yB,GAAY,KAAKR,GAAL,CAASC,IAAT,CAAc,CAAd,C;AACZY,wB,GAAW,KAAKb,GAAL,CAASC,IAAT,CAAc,CAAd,C;AACXQ,wB,GAAW,KAAKT,GAAL,CAASC,IAAT,CAAc,CAAd,C;;uBACX,KAAKC,OAAL,CAAaC,EAAb,CAAgBY,OAAhB,CAAwBP,SAAxB,EAAmCK,QAAnC,EAA6CJ,QAA7C,C;;;;;;;;;;;;;;;;;AAGR;;;;;;;;;;;;;AAIQD,yB,GAAY,KAAKR,GAAL,CAASC,IAAT,CAAc,CAAd,C;AACZe,0B,GAAa,KAAKhB,GAAL,CAASC,IAAT,CAAc,CAAd,C;;uBACb,KAAKC,OAAL,CAAaC,EAAb,CAAgBc,MAAhB,CAAuBT,SAAvB,EAAkCQ,UAAlC,C;;;;;;;;;;;;;;;;;AAGR;;;;;;;;;;;;;AAIQR,yB,GAAY,KAAKR,GAAL,CAASC,IAAT,CAAc,CAAd,C;AACZiB,wB,GAAW,KAAKlB,GAAL,CAASC,IAAT,CAAc,CAAd,C;AACXe,0B,GAAa,KAAKhB,GAAL,CAASC,IAAT,CAAc,CAAd,C;;uBACb,KAAKC,OAAL,CAAaC,EAAb,CAAgBgB,MAAhB,CAAuBX,SAAvB,EAAkCU,QAAlC,EAA4CF,UAA5C,C;;;;;;;;;;;;;;;;;AAGR;;;;;;;;;;;;;AAIQR,yB,GAAY,KAAKR,GAAL,CAASC,IAAT,CAAc,CAAd,C;AACZQ,wB,GAAW,KAAKT,GAAL,CAASC,IAAT,CAAc,CAAd,C;;uBACX,KAAKC,OAAL,CAAaC,EAAb,CAAgBiB,MAAhB,CAAuBZ,SAAvB,EAAkCC,QAAlC,C;;;;;;;;;;;;;;;;;AAGR;;;;;;;;;;;;AAIE;AACAH,wBAAQC,GAAR,CAAY,OAAZ;;;;;;;;;;;;;;;;;;;EA5EuBX,U;;AAgF3ByB,OAAOC,OAAP,GAAiBxB,YAAjB","file":"io.js","sourcesContent":["'use strict';\nconst Controller = require('egg').Controller;\n\nclass IOController extends Controller {\n\n  /**\n   * 登录\n   */\n  async login() {\n    const token = this.ctx.args[0];\n    const socketId = await this.service.io.login(token);\n    // todo 开发测试使用，记得删除\n    console.log(socketId);\n  }\n\n  /**\n   * 聊天\n   */\n  async chat() {\n    const userToken = this.ctx.args[0];\n    const targetId = this.ctx.args[1];\n    const content = this.ctx.args[2];\n    const type = this.ctx.args[3];\n    await this.service.io.chat(userToken, targetId, content, type);\n  }\n\n  /**\n   * 点赞\n   */\n  async like() {\n    const userToken = this.ctx.args[0];\n    const targetId = this.ctx.args[1];\n    const circleId = this.ctx.args[2];\n    await this.service.io.like(userToken, targetId, circleId);\n  }\n\n  /**\n   * 评论\n   */\n  async comment() {\n    const userToken = this.ctx.args[0];\n    const circleId = this.ctx.args[1];\n    const targetId = this.ctx.args[2];\n    await this.service.io.comment(userToken, circleId, targetId);\n  }\n\n  /**\n   * 回答\n   */\n  async answer() {\n    const userToken = this.ctx.args[0];\n    const questionId = this.ctx.args[1];\n    await this.service.io.answer(userToken, questionId);\n  }\n\n  /**\n   * 邀请回答\n   */\n  async invite() {\n    const userToken = this.ctx.args[0];\n    const expertId = this.ctx.args[1];\n    const questionId = this.ctx.args[2];\n    await this.service.io.invite(userToken, expertId, questionId);\n  }\n\n  /**\n   * 关注用户\n   */\n  async follow() {\n    const userToken = this.ctx.args[0];\n    const targetId = this.ctx.args[1];\n    await this.service.io.follow(userToken, targetId);\n  }\n\n  /**\n   * 离开\n   */\n  async disconnecting() {\n    // todo\n    console.log('close');\n  }\n}\n\nmodule.exports = IOController;\n"]}